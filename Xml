using System;
using System.IO;
using System.Xml.Serialization;

public class TestRun
{
    public string module { get; set; }
    public string package { get; set; }
    public string @class { get; set; }
    public string name { get; set; }
    public string duration { get; set; }
    public string status { get; set; }
    public string started { get; set; }
}

public class TestRuns
{
    public TestRun test_run { get; set; }
}

public class TestResult
{
    public TestRuns test_runs { get; set; }
}

public class Program
{
    public static void Main()
    {
        // Create an instance of TestResult and populate its properties
        TestResult testResult = new TestResult
        {
            test_runs = new TestRuns
            {
                test_run = new TestRun
                {
                    module = "/updatedModule",
                    package = "updatedPackage",
                    @class = "UpdatedHelloWorldTest",
                    name = "updatedTestOne",
                    duration = "5",
                    status = "Failed",
                    started = "1430919299999"
                }
            }
        };

        try
        {
            // Serialize TestResult object to XML string
            string xml;
            using (StringWriter sw = new StringWriter())
            {
                XmlSerializer serializer = new XmlSerializer(typeof(TestResult));
                serializer.Serialize(sw, testResult);
                xml = sw.ToString();
            }

            // Deserialize XML string to TestResult object
            TestResult deserializedTestResult;
            using (StringReader sr = new StringReader(xml))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(TestResult));
                deserializedTestResult = (TestResult)serializer.Deserialize(sr);
            }

            // Update values in the TestResult object
            deserializedTestResult.test_runs.test_run.module = "/newModule";
            deserializedTestResult.test_runs.test_run.package = "newPackage";
            deserializedTestResult.test_runs.test_run.@class = "NewHelloWorldTest";
            deserializedTestResult.test_runs.test_run.name = "newTestOne";
            deserializedTestResult.test_runs.test_run.duration = "10";
            deserializedTestResult.test_runs.test_run.status = "Passed";
            deserializedTestResult.test_runs.test_run.started = "1430919290000";

            // Serialize updated TestResult object back to XML string
            string updatedXml;
            using (StringWriter sw = new StringWriter())
            {
                XmlSerializer serializer = new XmlSerializer(typeof(TestResult));
                serializer.Serialize(sw, deserializedTestResult);
                updatedXml = sw.ToString();
            }

            // Output the updated XML string
            Console.WriteLine(updatedXml);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error updating XML: {ex.Message}");
        }
    }
}
